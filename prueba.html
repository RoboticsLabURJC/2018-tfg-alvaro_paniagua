<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <!-- Physics for A-Frame VR -->
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.1.2/dist/aframe-physics-system.js"></script>
    <script src="js/snapComponent.js">

    </script>
    <script src="js/spectatorComponent.js"></script>
    <script src="js/followBodyComponent.js"></script>
    <script src="js/interfacesRobot.js"></script>

  </head>
  <body>
    <h1 style="text-align:center;">Websim Simulator</h1>
    <div id="websimDiv" style="width:1250px; height:700px;">
      <a-scene id="scene" backgorund="color: gray;" stats embedded physics="debug: true" inspector="url: https://aframe.io/releases/0.4.0/aframe-inspector.min.js">
        <a-assets>
          <a-asset-item id="model-pibot" src="assets/models/pibot.dae"></a-asset-item>
          <a-asset-item id="model-chasis" src="assets/models/chasis.dae"></a-asset-item>
          <a-asset-item id="model-right-wheel" src="assets/models/right_wheel.dae"></a-asset-item>
          <a-asset-item id="model-left-wheel" src="assets/models/left_wheel.dae"></a-asset-item>
          <img id="ground" src="assets/textures/circle.png" />
        </a-assets>
        <!-- Pibot, which body is the asset item with ID = model-pibot -->
        <a-entity dynamic-body id="a-pibot" collada-model="#model-pibot" scale="5 5 5" rotation="0 0 0" position="0 0.1 0">
          <a-entity id="secondaryCamera" position="0.1 0.02 0" rotation="-20 -90 0">
            <!-- Create a second third-person camera which cant be controlled, the Pibot camera -->
            <a-camera spectator="canvas:#spectatorDiv;" active="false" wasd-controls-enabled="false" look-controls-enabled="false"></a-camera>
          </a-entity>
        </a-entity>
        <a-entity id="positionSensor"
                  follow-body="entityId:a-pibot"static-body
                  raycaster
                  line
                  position="2.5 0.3 0">
                </a-entity>
        <a-box class="collidable" raycaster-helper dynamic-body="mass:10000;" scale="1 1 4" position="7.87 0.01 -0.16" rotation="0 0 0" color="#4CC3D9"></a-box>
        <!--<a-box class="collidable" raycaster-helper dynamic-body="mass:10000;" scale="1 1 4" position="-0.61 0.01 -0.16" rotation="0 0 0" color="#4CC3D9"></a-box>-->
        <!-- Scenario -->
        <a-plane static-body position="0 0 0"
                 rotation="-90 0 0"
                 width="100"
                 height="100"
                 repeat="1 1"
                 src="#ground">
        </a-plane>

        <!-- Illumination -->
        <a-light type="ambient" color="white"></a-light>
        <!--<a-light type="point" intensity="1" position="-2 2 4"></a-light>-->

        <a-entity id="primaryCamera" position="0 4 3.8" rotation="-45 0 0">
          <a-camera ></a-camera>
        </a-entity>

      </a-scene>
    </div>
    <h3>OpenCV image</h3>
    <canvas id="outputCanvas" ></canvas>
    <h3>Robot Camera</h3>
    <div id="spectatorDiv" style="width: 150px; height: 100px;"></div>
    <script type="text/javascript" src="js/opencv3.3.1.js" ></script>
    <script type="text/javascript" src="./myAlgorithm.js" ></script>
  </body>
</html>
